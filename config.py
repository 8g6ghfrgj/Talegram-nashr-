import os
from logging import INFO

# ============ ุฅุนุฏุงุฏุงุช ุงูุจูุช ============
BOT_TOKEN = os.environ.get('BOT_TOKEN')

# ============ ุงููุงูู ุงูุฑุฆูุณู ============
OWNER_ID = 8148890042  # ุงููุงูู ุงููุญูุฏ ุงูุฐู ูุณุชุทูุน ุฅุถุงูุฉ ูุดุฑููู

# ============ ุฅุนุฏุงุฏุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช ============
DB_NAME = "bot_database.db"

# ============ ุชุฃุฎูุฑุงุช ุงููุดุฑ (ุญุณุจ ุฎูุงุฑุฒููุงุช ุชููุฌุฑุงู) ============
DELAY_SETTINGS = {
    # ุชุฃุฎูุฑุงุช ุงููุดุฑ - ุชู ุฒูุงุฏุชูุง ูุชุฌูุจ ุญุธุฑ ุงูุญุณุงุจุงุช
    'publishing': {
        'between_ads': 0.1,          # ุจูู ุงูุฅุนูุงูุงุช ูู ููุณ ุงููุฌููุนุฉ
        'between_groups': 0.2,       # ุจูู ุงููุฌููุนุงุช ุงููุฎุชููุฉ
        'between_cycles': 30,        # ุจูู ุงูุฏูุฑุงุช ุงูุฑุฆูุณูุฉ (ุฒุงุฏุช ูู 10 ุฅูู 30)
        'group_publishing_delay': 60, # ุชุฃุฎูุฑ ุฅุฌุจุงุฑู 60 ุซุงููุฉ ุจูู ูุดุฑ ุงููุฑูุจุงุช
    },
    
    # ุชุฃุฎูุฑุงุช ุงูุฑุฏูุฏ
    'private_reply': {
        'between_replies': 0.05,     # ุจูู ุงูุฑุฏูุฏ ูู ุงูุฎุงุต
        'between_cycles': 3,         # ุจูู ุงูุฏูุฑุงุช
    },
    
    'group_reply': {
        'between_replies': 0.05,     # ุจูู ุงูุฑุฏูุฏ ูู ุงููุฑูุจุงุช
        'between_cycles': 3,         # ุจูู ุงูุฏูุฑุงุช
    },
    
    'random_reply': {
        'between_replies': 0.05,     # ุจูู ุงูุฑุฏูุฏ ุงูุนุดูุงุฆูุฉ
        'between_cycles': 3,         # ุจูู ุงูุฏูุฑุงุช
    },
    
    # ุชุฃุฎูุฑุงุช ุงูุงูุถูุงู ูููุฌููุนุงุช
    'join_groups': {
        'between_links': 90,         # ุจูู ุงูุฑูุงุจุท (90 ุซุงููุฉ)
        'between_cycles': 5,         # ุจูู ุงูุฏูุฑุงุช
    }
}

# ============ ุฅุนุฏุงุฏุงุช ุงููููุงุช ============
FILE_SETTINGS = {
    'contact_filename': "ุชุณูู ุณูููู ุตุญุชู ูุงุชุณุงุจ.vcf",  # ุงุณู ููู ุฌูุงุช ุงูุงุชุตุงู
    'directories': {
        'ads': "temp_files/ads",
        'group_replies': "temp_files/group_replies",
        'random_replies': "temp_files/random_replies",
    }
}

# ============ ุญุงูุงุช ุงููุญุงุฏุซุฉ ============
# ุชุนุฑูู ุฌููุน ุญุงูุงุช ุงููุญุงุฏุซุฉ ุงููุทููุจุฉ
(
    ADD_ACCOUNT,
    ADD_AD_TYPE,
    ADD_AD_TEXT,
    ADD_AD_MEDIA,
    ADD_GROUP,
    ADD_PRIVATE_REPLY,
    ADD_ADMIN,
    ADD_RANDOM_REPLY,
    ADD_PRIVATE_TEXT,
    ADD_GROUP_TEXT,
    ADD_GROUP_PHOTO
) = range(11)

# ุชุนุฑูู ุญุงูุงุช ุฅุถุงููุฉ ูุงุณุชุฎุฏุงูุงุช ุฎุงุตุฉ
# ูุฐู ุงูุญุงูุงุช ุชุณุชุฎุฏู ูู ูุญุงุฏุซุงุช ุฅุถุงููุฉ
ADD_GROUP_TEXT_REPLY = 20
ADD_GROUP_PHOTO_REPLY = 21
ADD_GROUP_PHOTO_MEDIA = 22
ADD_RANDOM_MEDIA = 23

# ุฃู ูููู ุชุนุฑูููุง ุจุงูุชุณูุณู:
# (
#     ADD_ACCOUNT,
#     ADD_AD_TYPE,
#     ADD_AD_TEXT,
#     ADD_AD_MEDIA,
#     ADD_GROUP,
#     ADD_PRIVATE_REPLY,
#     ADD_ADMIN,
#     ADD_RANDOM_REPLY,
#     ADD_PRIVATE_TEXT,
#     ADD_GROUP_TEXT,
#     ADD_GROUP_PHOTO,
#     ADD_GROUP_TEXT_REPLY,
#     ADD_GROUP_PHOTO_REPLY,
#     ADD_GROUP_PHOTO_MEDIA,
#     ADD_RANDOM_MEDIA
# ) = range(15)

# ============ ุฃููุงุน ุงูุฅุนูุงูุงุช ============
AD_TYPES = {
    'text': '๐ ูุต ููุท',
    'photo': '๐ผ๏ธ ุตูุฑุฉ ูุน ูุต',
    'contact': '๐ ุฌูุฉ ุงุชุตุงู (VCF)'
}

# ============ ุญุงูุงุช ุงููุฌููุนุงุช ============
GROUP_STATUS = {
    'pending': 'โณ ูุนููุฉ',
    'joined': 'โ ููุถูุฉ',
    'failed': 'โ ูุดู'
}

# ============ ุฅุนุฏุงุฏุงุช ุงูุณุฌู ============
LOGGING_CONFIG = {
    'level': INFO,
    'format': '%(asctime)s - %(name)s - %(levelname)s - %(message)s',
    'date_format': '%Y-%m-%d %H:%M:%S',
    'file': 'bot.log',
    'max_size': 10 * 1024 * 1024,  # 10 MB
    'backup_count': 5
}

# ============ ุฑุณุงุฆู ุงูุจูุช ============
MESSAGES = {
    'start': "๐ ููุญุฉ ุชุญูู ุงูุจูุช ุงููุนูู - ุงูุฅุตุฏุงุฑ ุงููุนุฏู\n\n"
             "โก ุงููุดุฑ ุจุฃูุตู ุณุฑุนุฉ ูุน ุชุฃููู ุงูุญุณุงุจุงุช\n"
             "โก ุชุฃุฎูุฑ 60 ุซุงููุฉ ุจูู ูุดุฑ ุงููุฑูุจุงุช\n"
             "โก ุงูุฑุฏูุฏ ุงูุชููุงุฆูุฉ ุจุฃูุตู ุณุฑุนุฉ\n"
             "โก ุงูุงูุถูุงู ูููุฌููุนุงุช ุจุฃูุตู ุณุฑุนุฉ\n\n"
             "๐ ุงููุงูู ุงููุญูุฏ: ุงูุขูุฏู 8148890042\n\n"
             "ุงุฎุชุฑ ุงูุฅุฌุฑุงุก ุงูุฐู ุชุฑูุฏ ุชูููุฐู:",
    
    'unauthorized': "โ ููุณ ูุฏูู ุตูุงุญูุฉ ูููุตูู ุฅูู ูุฐุง ุงูุจูุช.",
    
    'owner_only': "โ ููุท ุงููุงูู ุงูุฑุฆูุณู ({}) ูุณุชุทูุน ุชูููุฐ ูุฐุง ุงูุฃูุฑ!",
    
    'no_accounts': "โ ูุง ุชูุฌุฏ ุญุณุงุจุงุช ูุดุทุฉ! ูุฌุจ ุฅุถุงูุฉ ุญุณุงุจุงุช ุฃููุงู.",
    
    'no_ads': "โ ูุง ุชูุฌุฏ ุฅุนูุงูุงุช! ูุฌุจ ุฅุถุงูุฉ ุฅุนูุงูุงุช ุฃููุงู.",
    
    'no_replies': "โ ูุง ุชูุฌุฏ ุฑุฏูุฏ ูุถุงูุฉ!",
    
    'no_groups': "โ ูุง ุชูุฌุฏ ูุฌููุนุงุช ูุถุงูุฉ!",
    
    'no_admins': "โ ูุง ุชูุฌุฏ ูุดุฑููู ูุถุงูุฉ!",
    
    'ad_added': "โ **ุชู ุญูุธ ุงูุฅุนูุงู ุจูุฌุงุญ!**\n\n"
                "๐ **ุฑูู ุงูุฅุนูุงู:** `{}`\n"
                "๐ **ุงูููุน:** {}\n"
                "๐ **ุงููุต:** {}",
    
    'account_added': "โ **ุชู ุฅุถุงูุฉ ุงูุญุณุงุจ ุจูุฌุงุญ!**\n\n"
                     "๐ **ุฑูู ุงูุญุณุงุจ:** `{}`\n"
                     "๐ฑ **ุฑูู ุงููุงุชู:** {}",
    
    'group_added': "โ **ุชู ุฅุถุงูุฉ ุงููุฌููุนุฉ ุจูุฌุงุญ!**\n\n"
                   "๐ **ุฑูู ุงููุฌููุนุฉ:** `{}`\n"
                   "๐ **ุงูุฑุงุจุท:** {}",
    
    'admin_added': "โ **ุชู ุฅุถุงูุฉ ุงููุดุฑู ุจูุฌุงุญ!**\n\n"
                   "๐ **ุฑูู ุงููุดุฑู:** `{}`\n"
                   "๐ค **ุขูุฏู ุงููุณุชุฎุฏู:** {}",
}

# ============ ุฃุฒุฑุงุฑ ุงูููุงุฆู ============
BUTTONS = {
    'main_menu': {
        'accounts': "๐ฅ ุฅุฏุงุฑุฉ ุงูุญุณุงุจุงุช",
        'ads': "๐ข ุฅุฏุงุฑุฉ ุงูุฅุนูุงูุงุช",
        'groups': "๐ฅ ุฅุฏุงุฑุฉ ุงููุฌููุนุงุช",
        'replies': "๐ฌ ุฅุฏุงุฑุฉ ุงูุฑุฏูุฏ",
        'admins': "๐จโ๐ผ ุฅุฏุงุฑุฉ ุงููุดุฑููู",
        'start_publishing': "๐ ุจุฏุก ุงููุดุฑ",
        'stop_publishing': "โน๏ธ ุฅููุงู ุงููุดุฑ"
    },
    
    'ad_types': {
        'text': "๐ ุฅุนูุงู ูุตู",
        'photo': "๐ผ๏ธ ุฅุนูุงู ุจุตูุฑุฉ",
        'contact': "๐ ุฅุนูุงู ุฌูุฉ ุงุชุตุงู"
    },
    
    'back': "๐ ุฑุฌูุน",
    'cancel': "โ ุฅูุบุงุก"
}

# ============ ุฅุนุฏุงุฏุงุช ุงูุชุทุจูู ============
APP_SETTINGS = {
    'max_accounts_per_admin': 10,
    'max_ads_per_admin': 50,
    'max_groups_per_admin': 100,
    'max_replies_per_admin': 20,
    'session_timeout': 3600,  # 1 ุณุงุนุฉ
    'cleanup_interval': 300,  # 5 ุฏูุงุฆู
}

# ============ ูุธููุฉ ููุชุญูู ูู ุงูุชููู ============
def validate_config():
    """ุงูุชุญูู ูู ุตุญุฉ ุงูุฅุนุฏุงุฏุงุช"""
    errors = []
    
    if not BOT_TOKEN:
        errors.append("โ ูู ูุชู ุชุนููู BOT_TOKEN ูู ูุชุบูุฑุงุช ุงูุจูุฆุฉ")
    
    if not OWNER_ID:
        errors.append("โ ูู ูุชู ุชุนููู OWNER_ID")
    
    if errors:
        for error in errors:
            print(error)
        print("โ๏ธ ูุฑุฌู ุฅุถุงูุฉ BOT_TOKEN ูู Render.com โ Environment")
        return False
    
    return True

# ============ ูุธููุฉ ูุนุฑุถ ุงูุฅุนุฏุงุฏุงุช ============
def print_config():
    """ุนุฑุถ ุฅุนุฏุงุฏุงุช ุงูุจูุช"""
    print("=" * 60)
    print("โ๏ธ  ุฅุนุฏุงุฏุงุช ุงูุจูุช ุงููุนูู")
    print("=" * 60)
    print(f"๐ ุงููุงูู: {OWNER_ID}")
    print(f"๐ ุชุฃุฎูุฑ ูุดุฑ ุงููุฑูุจุงุช: {DELAY_SETTINGS['publishing']['group_publishing_delay']} ุซุงููุฉ")
    print(f"๐ ุงุณู ููู ุฌูุงุช ุงูุงุชุตุงู: {FILE_SETTINGS['contact_filename']}")
    print(f"๐ ุฃููุงุน ุงูุฅุนูุงูุงุช: {', '.join(AD_TYPES.values())}")
    print(f"๐ ุงูุญุฏ ุงูุฃูุตู ููุฅุนูุงูุงุช: {APP_SETTINGS['max_ads_per_admin']}")
    print("=" * 60)

# ============ ุฅุนุฏุงุฏุงุช ุงูุนุฑุถ ============
DISPLAY_SETTINGS = {
    'truncate_length': 100,  # ุทูู ุงููุต ุงููุฎุชุตุฑ
    'ads_per_page': 5,
    'accounts_per_page': 5,
    'groups_per_page': 5,
    'admins_per_page': 5,
    'replies_per_page': 5,
}

# ============ ุฅุนุฏุงุฏุงุช ุงูุฃูุงู ============
SECURITY_SETTINGS = {
    'min_password_length': 6,
    'session_validation': True,
    'ip_tracking': False,
    'max_login_attempts': 3,
    'lockout_duration': 300,  # 5 ุฏูุงุฆู
}

# ============ ุฃููุงุน ุงููููุงุช ุงููุณููุญุฉ ============
ALLOWED_FILE_TYPES = {
    'photos': ['.jpg', '.jpeg', '.png', '.gif'],
    'documents': ['.pdf', '.doc', '.docx', '.txt'],
    'contacts': ['.vcf']
}

# ============ ุฅุนุฏุงุฏุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงููุชูุฏูุฉ ============
DATABASE_SETTINGS = {
    'connection_timeout': 30,
    'journal_mode': 'WAL',
    'synchronous': 'NORMAL',
    'cache_size': -2000,  # 2MB
    'foreign_keys': True,
    'temp_store': 'MEMORY'
}

# ============ ูุธููุฉ ุงูุชุญูู ูู ุงูุฅุนุฏุงุฏุงุช ============
def check_all_settings():
    """ูุญุต ูุงูุฉ ุงูุฅุนุฏุงุฏุงุช"""
    print_config()
    
    # ุงูุชุญูู ูู ุงููุฌูุฏุงุช
    directories = FILE_SETTINGS['directories']
    for name, path in directories.items():
        if not os.path.exists(path):
            os.makedirs(path)
            print(f"๐ ุชู ุฅูุดุงุก ูุฌูุฏ: {path}")
    
    # ุงูุชุญูู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
    if not os.path.exists(DB_NAME):
        print(f"๐ ูุงุนุฏุฉ ุงูุจูุงูุงุช '{DB_NAME}' ุณูุชู ุฅูุดุงุคูุง ุชููุงุฆูุงู")
    
    return True

# ============ ุจุฏุก ุงูุชุดุบูู ============
if __name__ == "__main__":
    # ุนูุฏ ุชุดุบูู ุงูููู ูุจุงุดุฑุฉุ ุนุฑุถ ุงูุฅุนุฏุงุฏุงุช
    print_config()
    print("โ ููู ุงูุฅุนุฏุงุฏุงุช ุฌุงูุฒ ููุงุณุชุฎุฏุงู")
